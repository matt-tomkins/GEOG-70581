<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 3 A (brief) introduction to R | Practical_1.knit</title>
  <meta name="description" content="<center>
Hydrological analysis in R
</center>" />
  <meta name="generator" content="bookdown 0.23 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 3 A (brief) introduction to R | Practical_1.knit" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 3 A (brief) introduction to R | Practical_1.knit" />
  
  
  




  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="Installation.html"/>
<link rel="next" href="FirstPractical.html"/>
<script src="libs/header-attrs-2.9/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#practical-outline"><i class="fa fa-check"></i><b>1.1</b> Practical outline</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#objectives"><i class="fa fa-check"></i><b>1.2</b> Objectives</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="Installation.html"><a href="Installation.html"><i class="fa fa-check"></i><b>2</b> Installation</a>
<ul>
<li class="chapter" data-level="2.1" data-path="Installation.html"><a href="Installation.html#r"><i class="fa fa-check"></i><b>2.1</b> R</a></li>
<li class="chapter" data-level="2.2" data-path="Installation.html"><a href="Installation.html#r-studio"><i class="fa fa-check"></i><b>2.2</b> R Studio</a></li>
<li class="chapter" data-level="2.3" data-path="Installation.html"><a href="Installation.html#course-materials"><i class="fa fa-check"></i><b>2.3</b> Course materials</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="Intro_to_R.html"><a href="Intro_to_R.html"><i class="fa fa-check"></i><b>3</b> A (brief) introduction to R</a>
<ul>
<li class="chapter" data-level="3.1" data-path="Intro_to_R.html"><a href="Intro_to_R.html#overview"><i class="fa fa-check"></i><b>3.1</b> Overview</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="Intro_to_R.html"><a href="Intro_to_R.html#what-is-r"><i class="fa fa-check"></i><b>3.1.1</b> What is R?</a></li>
<li class="chapter" data-level="3.1.2" data-path="Intro_to_R.html"><a href="Intro_to_R.html#why_code"><i class="fa fa-check"></i><b>3.1.2</b> Why code?</a></li>
<li class="chapter" data-level="3.1.3" data-path="Intro_to_R.html"><a href="Intro_to_R.html#a-quick-note-on-the-practicals"><i class="fa fa-check"></i><b>3.1.3</b> A quick note on the practicals</a></li>
<li class="chapter" data-level="3.1.4" data-path="Intro_to_R.html"><a href="Intro_to_R.html#dealing-with-errors"><i class="fa fa-check"></i><b>3.1.4</b> Dealing with errors</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="Intro_to_R.html"><a href="Intro_to_R.html#loading-r"><i class="fa fa-check"></i><b>3.2</b> Loading R</a></li>
<li class="chapter" data-level="3.3" data-path="Intro_to_R.html"><a href="Intro_to_R.html#variables"><i class="fa fa-check"></i><b>3.3</b> Variables</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="Intro_to_R.html"><a href="Intro_to_R.html#variable-names"><i class="fa fa-check"></i><b>3.3.1</b> Variable names</a></li>
<li class="chapter" data-level="3.3.2" data-path="Intro_to_R.html"><a href="Intro_to_R.html#variable-types"><i class="fa fa-check"></i><b>3.3.2</b> Variable types</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="Intro_to_R.html"><a href="Intro_to_R.html#data-structures"><i class="fa fa-check"></i><b>3.4</b> Data structures</a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="Intro_to_R.html"><a href="Intro_to_R.html#vectors"><i class="fa fa-check"></i><b>3.4.1</b> Vectors</a></li>
<li class="chapter" data-level="3.4.2" data-path="Intro_to_R.html"><a href="Intro_to_R.html#data-frames"><i class="fa fa-check"></i><b>3.4.2</b> Data frames</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="Intro_to_R.html"><a href="Intro_to_R.html#scripts"><i class="fa fa-check"></i><b>3.5</b> Scripts</a>
<ul>
<li class="chapter" data-level="3.5.1" data-path="Intro_to_R.html"><a href="Intro_to_R.html#comments"><i class="fa fa-check"></i><b>3.5.1</b> Comments</a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="Intro_to_R.html"><a href="Intro_to_R.html#packages"><i class="fa fa-check"></i><b>3.6</b> Loading packages</a></li>
<li class="chapter" data-level="3.7" data-path="Intro_to_R.html"><a href="Intro_to_R.html#data_loading"><i class="fa fa-check"></i><b>3.7</b> Loading data</a></li>
<li class="chapter" data-level="3.8" data-path="Intro_to_R.html"><a href="Intro_to_R.html#whitebox-tools"><i class="fa fa-check"></i><b>3.8</b> Whitebox Tools</a></li>
<li class="chapter" data-level="3.9" data-path="Intro_to_R.html"><a href="Intro_to_R.html#using-r-packages"><i class="fa fa-check"></i><b>3.9</b> Using R packages</a>
<ul>
<li class="chapter" data-level="3.9.1" data-path="Intro_to_R.html"><a href="Intro_to_R.html#plots-files-and-packages"><i class="fa fa-check"></i><b>3.9.1</b> Plots, files and packages</a></li>
</ul></li>
<li class="chapter" data-level="3.10" data-path="Intro_to_R.html"><a href="Intro_to_R.html#loading-data"><i class="fa fa-check"></i><b>3.10</b> Loading data</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="FirstPractical.html"><a href="FirstPractical.html"><i class="fa fa-check"></i><b>4</b> Eskdale <strong>1</strong> - Introduction</a>
<ul>
<li class="chapter" data-level="4.1" data-path="FirstPractical.html"><a href="FirstPractical.html#overview-1"><i class="fa fa-check"></i><b>4.1</b> Overview</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="FirstPractical.html"><a href="FirstPractical.html#intended-learning-outcomes"><i class="fa fa-check"></i><b>4.1.1</b> Intended learning outcomes</a></li>
<li class="chapter" data-level="4.1.2" data-path="FirstPractical.html"><a href="FirstPractical.html#assessment"><i class="fa fa-check"></i><b>4.1.2</b> Assessment</a></li>
<li class="chapter" data-level="4.1.3" data-path="FirstPractical.html"><a href="FirstPractical.html#quiz"><i class="fa fa-check"></i><b>4.1.3</b> Quiz</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="Eskdale_set_up.html"><a href="Eskdale_set_up.html"><i class="fa fa-check"></i><b>5</b> Eskdale <strong>2</strong> - Set-up</a>
<ul>
<li class="chapter" data-level="5.1" data-path="Eskdale_set_up.html"><a href="Eskdale_set_up.html#install-programs"><i class="fa fa-check"></i><b>5.1</b> Install programs</a></li>
<li class="chapter" data-level="5.2" data-path="Eskdale_set_up.html"><a href="Eskdale_set_up.html#download_data"><i class="fa fa-check"></i><b>5.2</b> Download data</a></li>
<li class="chapter" data-level="5.3" data-path="Eskdale_set_up.html"><a href="Eskdale_set_up.html#open-rstudio"><i class="fa fa-check"></i><b>5.3</b> Open RStudio</a></li>
<li class="chapter" data-level="5.4" data-path="Eskdale_set_up.html"><a href="Eskdale_set_up.html#initialise-an-r-project"><i class="fa fa-check"></i><b>5.4</b> Initialise an R project</a></li>
<li class="chapter" data-level="5.5" data-path="Eskdale_set_up.html"><a href="Eskdale_set_up.html#creating-an-r-script"><i class="fa fa-check"></i><b>5.5</b> Creating an R script</a></li>
<li class="chapter" data-level="5.6" data-path="Eskdale_set_up.html"><a href="Eskdale_set_up.html#install-required-packages"><i class="fa fa-check"></i><b>5.6</b> Install required packages</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="Eskdale_flow_algorithms.html"><a href="Eskdale_flow_algorithms.html"><i class="fa fa-check"></i><b>6</b> Eskdale <strong>3</strong> - Flow routing</a>
<ul>
<li class="chapter" data-level="6.1" data-path="Eskdale_flow_algorithms.html"><a href="Eskdale_flow_algorithms.html#dem-pre-processing-flow-enforcement"><i class="fa fa-check"></i><b>6.1</b> DEM pre-processing: flow enforcement</a></li>
<li class="chapter" data-level="6.2" data-path="Eskdale_flow_algorithms.html"><a href="Eskdale_flow_algorithms.html#calculating-flow-parameters-pointers"><i class="fa fa-check"></i><b>6.2</b> Calculating Flow Parameters: Pointers</a></li>
<li class="chapter" data-level="6.3" data-path="Eskdale_flow_algorithms.html"><a href="Eskdale_flow_algorithms.html#comparing-flow-algorithms"><i class="fa fa-check"></i><b>6.3</b> Comparing flow algorithms</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="SecondPractical.html"><a href="SecondPractical.html"><i class="fa fa-check"></i><b>7</b> Practical 2 - Mersey</a>
<ul>
<li class="chapter" data-level="7.1" data-path="SecondPractical.html"><a href="SecondPractical.html#part-1-overview"><i class="fa fa-check"></i><b>7.1</b> Part 1: Overview</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="SecondPractical.html"><a href="SecondPractical.html#topics-covered-in-this-practical"><i class="fa fa-check"></i><b>7.1.1</b> Topics covered in this practical</a></li>
<li class="chapter" data-level="7.1.2" data-path="SecondPractical.html"><a href="SecondPractical.html#intended-learning-outcomes-1"><i class="fa fa-check"></i><b>7.1.2</b> Intended Learning Outcomes</a></li>
<li class="chapter" data-level="7.1.3" data-path="SecondPractical.html"><a href="SecondPractical.html#assessment-1"><i class="fa fa-check"></i><b>7.1.3</b> Assessment</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="Assessment.html"><a href="Assessment.html"><i class="fa fa-check"></i><b>8</b> Assessment</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./"><center>
Hydrological analysis in R
</center></a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="Intro_to_R" class="section level1" number="3">
<h1><span class="header-section-number">Chapter 3</span> A (brief) introduction to R</h1>
<div id="overview" class="section level2" number="3.1">
<h2><span class="header-section-number">3.1</span> Overview</h2>
<div id="what-is-r" class="section level3" number="3.1.1">
<h3><span class="header-section-number">3.1.1</span> What is R?</h3>
<p>R was originally focused on statistical data analysis, but has evolved into a general-purpose high level programming language. High level languages are typically less complicated and more user friendly than low level languages (e.g. C, C++, Java), but this comes at the expense of being slightly slower to execute.</p>
<p>Importantly, R is free and open-source and its core functionality can be extended using <strong>packages</strong>. These are available through the <strong>C</strong>omprehensive <strong>R</strong> <strong>A</strong>rchive <strong>N</strong>etwork (<a href="https://cran.r-project.org/web/packages/">CRAN</a>) and allow the user to perform a range of both simple and complex tasks (e.g. reading and writing files, rendering images), without the requirement to delve into the underlying source code.</p>
<p>While there are a myriad of free online resources available to help you learn R, including <a href="http://r4ds.had.co.nz/">R for Data Science</a> and <a href="https://bookdown.org/ndphillips/YaRrr/">YaRrr! The Pirate’s Guide to R</a>, as well as paid options from <a href="https://www.datacamp.com/courses/free-introduction-to-r">Data Camp</a>, this chapter and the subsequent practicals will equip you with all the skills required to complete the course.</p>
</div>
<div id="why_code" class="section level3" number="3.1.2">
<h3><span class="header-section-number">3.1.2</span> Why code?</h3>
<p>For those of you familiar with desktop GIS (e.g. ArcGIS, QGIS) or other statistical programs (e.g. Excel, SPSS), the transition to using code can be a frightening experience! However, there are a several reasons why it is worth persevering with.</p>
<p>First, and with <strong>career progression</strong> in mind, the ability to code is becoming increasingly important, particularly for those of you who want to progress down GIS or environmental career paths. Getting to grips with R and understanding the fundamentals of coding will equip you to learn new skills and new coding languages which may be required by a future employer (e.g. <a href="https://www.python.org/">Python</a>, <a href="https://uk.mathworks.com/products/matlab.html">MATLAB</a>, <a href="https://julialang.org/">Julia</a>, <a href="https://www.ruby-lang.org/en/">Ruby</a>, …).</p>
<p>Second, performing your analysis using code ensures that your outputs are <strong>reproducible</strong>. If you provide someone else with the original data files and the corresponding code i.e. a list of operations carried out by the computer (e.g. read data, modify, plot, perform statistical test, save), they should be able to reproduce your outputs exactly.</p>
<p>Third, code is <strong>repeatable</strong>. In standard GIS software (for example), most functions allow you to perform a single task on a single data file e.g. <a href="https://pro.arcgis.com/en/pro-app/latest/tool-reference/data-management/clip.htm">clipping</a> a digital elevation model to the geometry of a shapefile. By comparison, if that same functionality can be implemented in <a href="https://www.rdocumentation.org/packages/raster/versions/3.4-13/topics/crop">code</a>, it can applied as easily to 10 data files, or 1000, or 10,000.</p>
<p>Finally, code is easily <strong>modifiable</strong>. Code can be tweaked, adapted, or completely rewritten to produce the desired outputs. In R, a wide range of functions are already available in <a href="https://cran.r-project.org/web/packages/"><strong>packages</strong></a>, but you can write your own functions or combine existing functions to suit your analysis. This functionality is often not the case in other software, which are more complicated to modify and typically provide <a href="https://en.wikipedia.org/wiki/Black_box">Black Box</a> solutions, where we can inspect the inputs and outputs, but typically have limited understanding of the steps in between.</p>
<div class="figure">
<img src="figures/Using-R/Blackbox.png" alt="" />
<p class="caption"><a href="https://en.wikipedia.org/wiki/Black_box">Black Box programming</a></p>
</div>
</div>
<div id="a-quick-note-on-the-practicals" class="section level3" number="3.1.3">
<h3><span class="header-section-number">3.1.3</span> A quick note on the practicals</h3>
<p>As we progress through this course, make sure to read the content carefully. However, you do <strong>not</strong> have to run every bit of code in this document, although have a go where you feel it would help your understanding. If I explicitly want you to do something, I will write an instruction that looks like this:</p>
<blockquote>
<p>This is an instruction that tells you something to either think about, or do.</p>
</blockquote>
</div>
<div id="dealing-with-errors" class="section level3" number="3.1.4">
<h3><span class="header-section-number">3.1.4</span> Dealing with errors</h3>
<p>Before we load R and take our first steps towards coding excellence, it is worth noting that errors are an <strong>inevitable</strong> aspect of coding. Irrespective of how good you are, you will spend more time fixing your code (i.e. debugging) than writing it!</p>
<p>Luckily, when R encounters an error, it will try and help you out. For example, shown below is some simple R code. Here, we are tying to create a new variable called <strong>a</strong>, which is the product (+) of variable <strong>b</strong> and the number <strong>1</strong>:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="Intro_to_R.html#cb1-1" aria-hidden="true" tabindex="-1"></a>a <span class="ot">&lt;-</span> b <span class="sc">+</span> <span class="dv">1</span></span></code></pre></div>
<pre><code>## Error in eval(expr, envir, enclos): object &#39;b&#39; not found</code></pre>
<p>In this example, the code fails and prints the error message <code>object 'b' not found</code> because the variable <strong>b</strong> does not exist! We could solve this by defining <strong>b</strong> beforehand as follows:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="Intro_to_R.html#cb3-1" aria-hidden="true" tabindex="-1"></a>b <span class="ot">&lt;-</span> <span class="dv">3</span></span>
<span id="cb3-2"><a href="Intro_to_R.html#cb3-2" aria-hidden="true" tabindex="-1"></a>a <span class="ot">&lt;-</span> b <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb3-3"><a href="Intro_to_R.html#cb3-3" aria-hidden="true" tabindex="-1"></a>a</span></code></pre></div>
<pre><code>## [1] 4</code></pre>
<p>These error messages are <strong>important</strong> and contain helpful information - do not ignore them! If you’ve struggled to resolve the problem, you should then Google it (normally by just typing “R” followed by the error message into Google), e.g. <code>R Error in eval(expr, envir, enclos): object 'b' not found</code>.</p>
<p>Another useful source of information is <a href="https://stackoverflow.com/">StackOverflow</a> which is a public collection of coding questions and answers. If you’ve come across a challenging error, there’s a high probability that someone else has also encountered the same error, and there may be a solution already available.</p>
<p>Understanding, interpreting and fixing error messages is a key programming skill, so read the error messages carefully and use the above resources (Google, StackOverflow). If you need any additional help, staff and TAs will be happy to help during the practicals.</p>
</div>
</div>
<div id="loading-r" class="section level2" number="3.2">
<h2><span class="header-section-number">3.2</span> Loading R</h2>
<p>Now that we understand what R is, why it’s useful and what to do when something goes wrong, let’s begin.</p>
<blockquote>
<p>Open RStudio.</p>
</blockquote>
<p>The RStudio user-interface should resemble the following:</p>
<p><img src="figures/Using-R/Opening_RStudio.png" /></p>
<p>This contains the following primary windows, which are described below:</p>
<p><img src="figures/Using-R/RStudio_elements.png" id="workspace" /></p>
<p>In the <strong>console window</strong>, commands can be typed and results returned. For example, typing the following command into the console:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="Intro_to_R.html#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> <span class="sc">+</span> <span class="dv">2</span></span></code></pre></div>
<p>produces:</p>
<pre><code>## [1] 3</code></pre>
<blockquote>
<p>Copy and paste the above code into the console and press <strong>Enter</strong> to run. Does it produce the correct result?</p>
</blockquote>
<p>In the <strong>Workspace window</strong>, you can see all the objects that you have created in the current R session (<strong>Environment tab</strong>; currently empty!) as well as a record of the commands you’ve used (<strong>History tab</strong>; 1 + 2).</p>
<p>At it’s most basic, R can operate as a powerful calculator. We can add <code>+</code>, subtract <code>-</code>, multiply <code>*</code> and divide <code>/</code>, take the exponent <code>^</code>, calculate the square root <code>sqrt()</code> or the logarithm of a number <code>log10()</code>, or melt our computers by using the <code>factorial()</code> function.</p>
<p>We can also combine operators to produce more complicated commands. For example, the following code takes the <code>sqrt()</code> of 25 and then takes its factorial (<span class="math inline">\(5!\)</span>), which is equal to <span class="math inline">\(5 * 4 * 3 * 3 * 1\)</span>.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="Intro_to_R.html#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">factorial</span>(<span class="fu">sqrt</span>(<span class="dv">25</span>))</span></code></pre></div>
<pre><code>## [1] 120</code></pre>
</div>
<div id="variables" class="section level2" number="3.3">
<h2><span class="header-section-number">3.3</span> Variables</h2>
<p>One of the most important things to know about in R is the <strong>variable</strong> or <strong>object</strong>. In this set of practicals, we use the term “variable”, which is more common across different programming languages. Variables are containers that you can store values in, and then refer to again later.
R creates variables for you automatically, so all that is required is to name it and then use the <strong>assignment operator</strong> <code>&lt;-</code> to assign a value to it.</p>
<p>As a general rule (and because of complicated reasons), use <code>&lt;-</code> for assignment, as shown below, and <strong>don’t</strong> use <code>=</code>:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="Intro_to_R.html#cb9-1" aria-hidden="true" tabindex="-1"></a>b <span class="ot">&lt;-</span> <span class="dv">3</span></span></code></pre></div>
<blockquote>
<p>Run the above code. This assigns the value of “3” to a variable named “b”:</p>
</blockquote>
<p>You should now see that under the <a href="Intro_to_R.html#workspace"><strong>Workspace window</strong></a>, the variable <strong>b</strong> has been added to the Environment tab:</p>
<p><img src="figures/Practical-1/RStudio_environment.png" style="width:50.0%" /></p>
<p>The variable <strong>b</strong> can now be called again by the user.</p>
<blockquote>
<p>Run the following in the console. Does it work as expected?</p>
</blockquote>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="Intro_to_R.html#cb10-1" aria-hidden="true" tabindex="-1"></a>b <span class="sc">+</span> <span class="dv">5</span></span></code></pre></div>
<p>There are number of benefits to using variables. For example, take the following:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="Intro_to_R.html#cb11-1" aria-hidden="true" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="dv">5</span></span>
<span id="cb11-2"><a href="Intro_to_R.html#cb11-2" aria-hidden="true" tabindex="-1"></a>b <span class="ot">&lt;-</span> <span class="dv">10</span></span>
<span id="cb11-3"><a href="Intro_to_R.html#cb11-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-4"><a href="Intro_to_R.html#cb11-4" aria-hidden="true" tabindex="-1"></a>result <span class="ot">&lt;-</span> (<span class="fu">sqrt</span>(a) <span class="sc">+</span> <span class="fu">log</span>(b))<span class="sc">^</span>a <span class="sc">+</span> <span class="dv">2</span><span class="sc">*</span>b</span>
<span id="cb11-5"><a href="Intro_to_R.html#cb11-5" aria-hidden="true" tabindex="-1"></a>result</span></code></pre></div>
<pre><code>## [1] 1945.905</code></pre>
<p>This is a relatively complicated mathematical formula! It uses a square root <code>sqrt()</code> and logarithm <code>log()</code> function, as well as multiplication <code>*</code> and powers <code>^</code>. We could replicate this result by substituting each value of <strong>a</strong> for 5 and each value of <strong>b</strong> for 10, but this would be time consuming and prone to error, and would be very frustrating if we wanted to re-calculate the result for <code>a = 6</code> and <code>b = 11</code>! Using variables allows us to use and modify values multiple times within the code.</p>
<blockquote>
<p>Modify the code above to test for <code>a = 6</code> and <code>b = 11</code>. Compare your answer with a friend, colleague, peer, family member or Zoom companion. Did you get the same result?</p>
</blockquote>
<p>Using variables is also important for <a href="Intro_to_R.html#why_code"><strong>repeatability</strong></a>.</p>
<p>Let’s say we want to calculate the sum of the squares from 1 to 5 i.e. <span class="math inline">\(1^2 + 2^2 + 3^2 + 4^2 +5^2\)</span>. We could write this numerically in R as follows:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="Intro_to_R.html#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span><span class="sc">^</span><span class="dv">2</span> <span class="sc">+</span> <span class="dv">2</span><span class="sc">^</span><span class="dv">2</span> <span class="sc">+</span> <span class="dv">3</span><span class="sc">^</span><span class="dv">2</span> <span class="sc">+</span> <span class="dv">4</span><span class="sc">^</span><span class="dv">2</span> <span class="sc">+</span> <span class="dv">5</span><span class="sc">^</span><span class="dv">2</span></span></code></pre></div>
<p>This produces the current result:</p>
<pre><code>## [1] 55</code></pre>
<p>However, what if wanted to perform this calculation for all the numbers from 1 - 50 i.e. <span class="math inline">\(1^2 + 2^2 + 3^2 + ... + 50^2\)</span>?</p>
<p>What if we wanted to cube each value (i.e. <span class="math inline">\(n^3\)</span>), rather than squaring? Either change would require a great deal of manual editing, with lots of potential for error.</p>
<p>By comparison, using variables allows us to <strong>loop</strong> through a series of calculations. The code below creates a variable called <code>result</code> and loops through a sequence of numbers using <code>seq()</code> to perform the above calculation, where the variable <code>i</code> is updated each iteration.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="Intro_to_R.html#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Initialises a variable called result, with a value of 0</span></span>
<span id="cb15-2"><a href="Intro_to_R.html#cb15-2" aria-hidden="true" tabindex="-1"></a>result <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb15-3"><a href="Intro_to_R.html#cb15-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-4"><a href="Intro_to_R.html#cb15-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Loops through a sequence from 1 to 5 in increments of 1 (i.e. 1, 2, 3, 4, 5)</span></span>
<span id="cb15-5"><a href="Intro_to_R.html#cb15-5" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="fu">seq</span>(<span class="at">from =</span> <span class="dv">1</span>, <span class="at">to =</span> <span class="dv">5</span>, <span class="at">by =</span> <span class="dv">1</span>)){</span>
<span id="cb15-6"><a href="Intro_to_R.html#cb15-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Squares each number (i) and adds to result</span></span>
<span id="cb15-7"><a href="Intro_to_R.html#cb15-7" aria-hidden="true" tabindex="-1"></a>  result <span class="ot">&lt;-</span> result <span class="sc">+</span> i<span class="sc">^</span><span class="dv">2</span></span>
<span id="cb15-8"><a href="Intro_to_R.html#cb15-8" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb15-9"><a href="Intro_to_R.html#cb15-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-10"><a href="Intro_to_R.html#cb15-10" aria-hidden="true" tabindex="-1"></a>result</span></code></pre></div>
<pre><code>## [1] 55</code></pre>
<blockquote>
<p>Run the above code in the console. Try to modify the code to perform the calculation for 1 - 50; this should equal <span class="math inline">\(42925\)</span></p>
</blockquote>
<p>At this stage, <strong>don’t worry</strong> about understanding the syntax of the code above. The important thing to remember is that using variables allows to us to perform more complex and more robust analyses.</p>
<div id="variable-names" class="section level3" number="3.3.1">
<h3><span class="header-section-number">3.3.1</span> Variable names</h3>
<p>When defining a variable name, you can’t use spaces or characters that are not a-z, A-Z or 0-9. As a general rule, variables in R should be written in “snake case” (as opposed to “upper case” or “lower case”) where all words are in lower case and are separated by underscores (_). All of these are valid variable names in snake case:</p>
<ul>
<li>snake_case</li>
<li>a_really_long_snake_case_name</li>
<li>snake</li>
<li>s</li>
</ul>
<p>Other popular naming conventions include camelCase, UPPER_CASE or hyphen-case (among many others). Pick one and use it consistently.</p>
</div>
<div id="variable-types" class="section level3" number="3.3.2">
<h3><span class="header-section-number">3.3.2</span> Variable types</h3>
<p>Each variable will have a particular <strong>type</strong>, which specifies what kind of a value it can hold. Whilst this is handled automatically for you by R, it is important that you understand what the different types are. Here are some common examples:</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="Intro_to_R.html#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Character i.e. a string of letters, numbers and/or characters</span></span>
<span id="cb17-2"><a href="Intro_to_R.html#cb17-2" aria-hidden="true" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="st">&quot;Bill&quot;</span></span>
<span id="cb17-3"><a href="Intro_to_R.html#cb17-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-4"><a href="Intro_to_R.html#cb17-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Numeric i.e. a number with decimals</span></span>
<span id="cb17-5"><a href="Intro_to_R.html#cb17-5" aria-hidden="true" tabindex="-1"></a>b <span class="ot">&lt;-</span> <span class="fl">3.567</span></span>
<span id="cb17-6"><a href="Intro_to_R.html#cb17-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-7"><a href="Intro_to_R.html#cb17-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Integer</span></span>
<span id="cb17-8"><a href="Intro_to_R.html#cb17-8" aria-hidden="true" tabindex="-1"></a>c <span class="ot">&lt;-</span> <span class="dv">3</span></span>
<span id="cb17-9"><a href="Intro_to_R.html#cb17-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-10"><a href="Intro_to_R.html#cb17-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Logical i.e. TRUE or FALSE</span></span>
<span id="cb17-11"><a href="Intro_to_R.html#cb17-11" aria-hidden="true" tabindex="-1"></a>d <span class="ot">&lt;-</span> <span class="cn">TRUE</span></span></code></pre></div>
<blockquote>
<p>Run the above code. If successful, your workspace should now include the variables <code>a, b, c, d</code>.</p>
</blockquote>
<p>Some data types are compatible e.g. </p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="Intro_to_R.html#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Numeric + integer</span></span>
<span id="cb18-2"><a href="Intro_to_R.html#cb18-2" aria-hidden="true" tabindex="-1"></a>b <span class="sc">+</span> c</span></code></pre></div>
<pre><code>## [1] 6.567</code></pre>
<p>But others are not!</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="Intro_to_R.html#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Numeric + character</span></span>
<span id="cb20-2"><a href="Intro_to_R.html#cb20-2" aria-hidden="true" tabindex="-1"></a>b <span class="sc">+</span> a</span></code></pre></div>
<pre><code>## Error in b + a: non-numeric argument to binary operator</code></pre>
</div>
</div>
<div id="data-structures" class="section level2" number="3.4">
<h2><span class="header-section-number">3.4</span> Data structures</h2>
<p>In the previous examples, each variable has consisted of a <strong>single</strong> element. This could be a name (<code>bill</code>), a decimal number (<code>3.567</code>), an integer (<code>3</code>), and so on.</p>
<p>However, R can store data in a range of different structures, many of which you will encounter as we progress through the course.</p>
<div id="vectors" class="section level3" number="3.4.1">
<h3><span class="header-section-number">3.4.1</span> Vectors</h3>
<p>One of the simplest structures is the <strong>vector</strong>, which contains multiple elements of the same type. These are typically created using the command <code>c()</code>:</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="Intro_to_R.html#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Creating a vector (v) of the numbers 1 - 5</span></span>
<span id="cb22-2"><a href="Intro_to_R.html#cb22-2" aria-hidden="true" tabindex="-1"></a>v <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>)</span>
<span id="cb22-3"><a href="Intro_to_R.html#cb22-3" aria-hidden="true" tabindex="-1"></a>v</span></code></pre></div>
<pre><code>## [1] 1 2 3 4 5</code></pre>
<p>As a vector <strong>must</strong> have elements of the same type, R will try and coerce elements to the same type:</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="Intro_to_R.html#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Creating a mixed vector (m) containing numeric (1,2), character (&quot;Bill&quot;, &quot;Ben&quot;) and logical elements (TRUE)</span></span>
<span id="cb24-2"><a href="Intro_to_R.html#cb24-2" aria-hidden="true" tabindex="-1"></a>m <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="st">&quot;Bill&quot;</span>, <span class="st">&quot;Ben&quot;</span>, <span class="cn">TRUE</span>)</span>
<span id="cb24-3"><a href="Intro_to_R.html#cb24-3" aria-hidden="true" tabindex="-1"></a>m</span></code></pre></div>
<pre><code>## [1] &quot;1&quot;    &quot;2&quot;    &quot;Bill&quot; &quot;Ben&quot;  &quot;TRUE&quot;</code></pre>
<p>In the above example, the numeric and logical elements have been coerced to characters, as signified by these elements being enclosed by quotation marks <code>" "</code>.</p>
<p>We can also create vectors programmatically, rather than manually defining each element. For example, we can generate sequences using <code>seq()</code> or repetitive sequences using <code>rep()</code>:</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="Intro_to_R.html#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Creating a sequence from 1 to 5, in increments of 1</span></span>
<span id="cb26-2"><a href="Intro_to_R.html#cb26-2" aria-hidden="true" tabindex="-1"></a>s <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="at">from =</span> <span class="dv">1</span>, <span class="at">to =</span> <span class="dv">5</span>, <span class="at">by =</span> <span class="dv">1</span>)</span>
<span id="cb26-3"><a href="Intro_to_R.html#cb26-3" aria-hidden="true" tabindex="-1"></a>s</span></code></pre></div>
<pre><code>## [1] 1 2 3 4 5</code></pre>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="Intro_to_R.html#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Creating a vector of length 5, consisting of the value 10</span></span>
<span id="cb28-2"><a href="Intro_to_R.html#cb28-2" aria-hidden="true" tabindex="-1"></a>r <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="dv">10</span>, <span class="at">times =</span> <span class="dv">5</span>)</span>
<span id="cb28-3"><a href="Intro_to_R.html#cb28-3" aria-hidden="true" tabindex="-1"></a>r</span></code></pre></div>
<pre><code>## [1] 10 10 10 10 10</code></pre>
</div>
<div id="data-frames" class="section level3" number="3.4.2">
<h3><span class="header-section-number">3.4.2</span> Data frames</h3>
<p>Other common R data structures include <strong>matrices</strong>, <strong>lists</strong> and <strong>data frames</strong>. The data frame is the most commonly used structure for tabular data and will be familiar to those of you with experience in Microsoft Excel. Here is an example data frame, which is created by combining existing vectors of the same length:</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="Intro_to_R.html#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create numeric, character and logical vectors</span></span>
<span id="cb30-2"><a href="Intro_to_R.html#cb30-2" aria-hidden="true" tabindex="-1"></a>name <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;John&quot;</span>, <span class="st">&quot;Eric&quot;</span>, <span class="st">&quot;Michael&quot;</span>, <span class="st">&quot;Graham&quot;</span>, <span class="st">&quot;Terry&quot;</span>, <span class="st">&quot;Terry&quot;</span>)</span>
<span id="cb30-3"><a href="Intro_to_R.html#cb30-3" aria-hidden="true" tabindex="-1"></a>height <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fl">1.96</span>, <span class="fl">1.85</span>, <span class="fl">1.78</span>, <span class="fl">1.88</span>, <span class="fl">1.75</span>, <span class="fl">1.73</span>)</span>
<span id="cb30-4"><a href="Intro_to_R.html#cb30-4" aria-hidden="true" tabindex="-1"></a>nationality <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;British&quot;</span>, <span class="st">&quot;British&quot;</span>, <span class="st">&quot;British&quot;</span>, <span class="st">&quot;British&quot;</span>, <span class="st">&quot;American&quot;</span>, <span class="st">&quot;British&quot;</span>)</span>
<span id="cb30-5"><a href="Intro_to_R.html#cb30-5" aria-hidden="true" tabindex="-1"></a>bereft_of_life <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="cn">FALSE</span>, <span class="cn">FALSE</span>, <span class="cn">FALSE</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">TRUE</span>)</span>
<span id="cb30-6"><a href="Intro_to_R.html#cb30-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-7"><a href="Intro_to_R.html#cb30-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Combines into a data frame</span></span>
<span id="cb30-8"><a href="Intro_to_R.html#cb30-8" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(name, height, nationality, bereft_of_life)</span>
<span id="cb30-9"><a href="Intro_to_R.html#cb30-9" aria-hidden="true" tabindex="-1"></a>df</span></code></pre></div>
<pre><code>##      name height nationality bereft_of_life
## 1    John   1.96     British          FALSE
## 2    Eric   1.85     British          FALSE
## 3 Michael   1.78     British          FALSE
## 4  Graham   1.88     British           TRUE
## 5   Terry   1.75    American          FALSE
## 6   Terry   1.73     British           TRUE</code></pre>
<blockquote>
<p>Run the above code in your R console</p>
</blockquote>
<p>We’ll be working with data frames throughout the practicals, so it will be useful to know that we can access data frame elements in a variety of different ways. We can access individual columns of a data frame using the <code>$</code> operator, for example:</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="Intro_to_R.html#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract the &quot;name&quot; column</span></span>
<span id="cb32-2"><a href="Intro_to_R.html#cb32-2" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span>name</span></code></pre></div>
<pre><code>## [1] &quot;John&quot;    &quot;Eric&quot;    &quot;Michael&quot; &quot;Graham&quot;  &quot;Terry&quot;   &quot;Terry&quot;</code></pre>
<p>We can also extract using <strong>indexing</strong>, which requires us to provide the row and columns indexes in the following format: <code>df[row.index, column.index]</code></p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="Intro_to_R.html#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract the element at row 3, column 4</span></span>
<span id="cb34-2"><a href="Intro_to_R.html#cb34-2" aria-hidden="true" tabindex="-1"></a>df[<span class="dv">3</span>,<span class="dv">4</span>]</span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="Intro_to_R.html#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract rows 1 to 4, all columns</span></span>
<span id="cb36-2"><a href="Intro_to_R.html#cb36-2" aria-hidden="true" tabindex="-1"></a>df[<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>,] </span></code></pre></div>
<pre><code>##      name height nationality bereft_of_life
## 1    John   1.96     British          FALSE
## 2    Eric   1.85     British          FALSE
## 3 Michael   1.78     British          FALSE
## 4  Graham   1.88     British           TRUE</code></pre>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="Intro_to_R.html#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract rows 1 to 4, just the second column</span></span>
<span id="cb38-2"><a href="Intro_to_R.html#cb38-2" aria-hidden="true" tabindex="-1"></a>df[<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>, <span class="dv">2</span>]</span></code></pre></div>
<pre><code>## [1] 1.96 1.85 1.78 1.88</code></pre>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="Intro_to_R.html#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Extracts all rows, the second and third columns</span></span>
<span id="cb40-2"><a href="Intro_to_R.html#cb40-2" aria-hidden="true" tabindex="-1"></a>df[,<span class="dv">2</span><span class="sc">:</span><span class="dv">3</span>]</span></code></pre></div>
<pre><code>##   height nationality
## 1   1.96     British
## 2   1.85     British
## 3   1.78     British
## 4   1.88     British
## 5   1.75    American
## 6   1.73     British</code></pre>
<p>We can also extract rows and columns based on the data frame values elements, for example using the <code>subset()</code> function. This can be used to select and exclude variables and observations as follows:</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="Intro_to_R.html#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract data frame rows where height is more than or equal to (&gt;=) 1.8 m. </span></span>
<span id="cb42-2"><a href="Intro_to_R.html#cb42-2" aria-hidden="true" tabindex="-1"></a><span class="fu">subset</span>(df, height <span class="sc">&gt;=</span> <span class="fl">1.8</span>) </span></code></pre></div>
<pre><code>##     name height nationality bereft_of_life
## 1   John   1.96     British          FALSE
## 2   Eric   1.85     British          FALSE
## 4 Graham   1.88     British           TRUE</code></pre>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="Intro_to_R.html#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract data frames rows where nationality is not equal to (!=) American</span></span>
<span id="cb44-2"><a href="Intro_to_R.html#cb44-2" aria-hidden="true" tabindex="-1"></a><span class="fu">subset</span>(df, nationality <span class="sc">!=</span> <span class="st">&quot;American&quot;</span>)</span></code></pre></div>
<pre><code>##      name height nationality bereft_of_life
## 1    John   1.96     British          FALSE
## 2    Eric   1.85     British          FALSE
## 3 Michael   1.78     British          FALSE
## 4  Graham   1.88     British           TRUE
## 6   Terry   1.73     British           TRUE</code></pre>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="Intro_to_R.html#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract data frames rows where bereft_of_life is equal to (==) FALSE</span></span>
<span id="cb46-2"><a href="Intro_to_R.html#cb46-2" aria-hidden="true" tabindex="-1"></a><span class="fu">subset</span>(df, bereft_of_life <span class="sc">==</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<pre><code>##      name height nationality bereft_of_life
## 1    John   1.96     British          FALSE
## 2    Eric   1.85     British          FALSE
## 3 Michael   1.78     British          FALSE
## 5   Terry   1.75    American          FALSE</code></pre>
<blockquote>
<p>Using the above code as an example, extract all the rows where <code>name</code> is equal to Terry. Assign the result to a new variable. You can calculate the number of rows using the function <code>nrow()</code>. Did you get the following answer?</p>
</blockquote>
<pre><code>## [1] 2</code></pre>
<p>The sections above have given you a crash course in some of the fundamentals of R. Learning to code (or learning a new code syntax for those of your familiar with Python, MATLAB, Java, …) is similar to learning a new language. <strong>Don’t worry</strong> if it seems complicated! You can always refer back to these instructions if you get stuck, or ask for guidance.</p>
<p>To finish this Chapter, we’ll provide a brief overview of some other key skills, including writing <a href="Intro_to_R.html#scripts">R scripts</a>, <a href="Intro_to_R.html#data_loading">loading data</a> and working with <a href="Intro_to_R.html#packages">packages</a>. This is <strong>not</strong> an exhaustive list of R functions, and we’ll cover other functionality in Practicals 1 and 2 (e.g. loading GIS raster and vector data, creating maps and figures, performing statistical tests).</p>
<p>The R functionality outlined here will cover all the steps required for the <a href="Assessment.html#Assessment">assessment</a> and should equip you with the core skills required to progress further with R in the future</p>
</div>
</div>
<div id="scripts" class="section level2" number="3.5">
<h2><span class="header-section-number">3.5</span> Scripts</h2>
<p>So far we’ve been typing commands into the <strong>console</strong>. This works as expected; we can print results, store variables in the <strong>workspace</strong> and create plots in the <strong>plots</strong> window.</p>
<p>However, it is often more convenient to store our code in a <strong>script</strong>, which is simply a file containing a set of commands and comments. For example, a single R script could contain commands to load data, perform statistical analysis, and output the results to a new file. This can be run in a single keystroke, which is much simpler than typing each command in one after another.</p>
<p>To create a new R script:</p>
<blockquote>
<p>Navigate to <strong>File</strong>, <strong>New File</strong> and <strong>R Script</strong>.</p>
</blockquote>
<p>This should open a new window, with a new untitled R script:</p>
<p><img src="figures/Using-R/Creating_R_Script.png" style="width:50.0%" /></p>
<p>To save the script:</p>
<blockquote>
<p>Navigate to <strong>File</strong> and <strong>Save As</strong>, and save it in the GEOG70581 folder with an appropriate name (e.g. <code>learning_R</code>)</p>
</blockquote>
<p>Scripts work identically to the console…</p>
<div id="comments" class="section level3" number="3.5.1">
<h3><span class="header-section-number">3.5.1</span> Comments</h3>
</div>
</div>
<div id="packages" class="section level2" number="3.6">
<h2><span class="header-section-number">3.6</span> Loading packages</h2>
</div>
<div id="data_loading" class="section level2" number="3.7">
<h2><span class="header-section-number">3.7</span> Loading data</h2>
</div>
<div id="whitebox-tools" class="section level2" number="3.8">
<h2><span class="header-section-number">3.8</span> Whitebox Tools</h2>
<p>To Install WBT:</p>
</div>
<div id="using-r-packages" class="section level2" number="3.9">
<h2><span class="header-section-number">3.9</span> Using R packages</h2>
<p>Here’s the packages we’ll be using:</p>
<ul>
<li>Raster</li>
<li>Sp</li>
<li>ggplot2</li>
<li>…</li>
</ul>
<div id="plots-files-and-packages" class="section level3" number="3.9.1">
<h3><span class="header-section-number">3.9.1</span> Plots, files and packages</h3>
<p>This window provides access to plots created by the user, packages loaded to the environment, or files that are accessible in the working directory.</p>
<p>To demonstrate this, we’ll generate some random data using the following code, which uses the <a href="https://stat.ethz.ch/R-manual/R-devel/library/stats/html/Normal.html"><strong>rnorm</strong> function</a>. This generates 100 values, normally distributed at 10 ± 2 (mean ± standard deviation).</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="Intro_to_R.html#cb49-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(<span class="dv">100</span>, <span class="at">mean =</span>  <span class="dv">10</span>, <span class="at">sd =</span> <span class="dv">2</span>)</span>
<span id="cb49-2"><a href="Intro_to_R.html#cb49-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(x)</span></code></pre></div>
<blockquote>
<p><strong>Run</strong> the above code. A new variable <strong>x</strong> should be stored in the environment, and a plot should have been generated in the plots window, resembling the following. <strong>Note</strong>: your output will differ from that shown below as the underlying data have been generated randomly.</p>
</blockquote>
<div class="figure">
<img src="figures/Practical-1/plotting.png" alt="" />
<p class="caption">A random distribution generated using <strong>rnorm</strong></p>
</div>
</div>
</div>
<div id="loading-data" class="section level2" number="3.10">
<h2><span class="header-section-number">3.10</span> Loading data</h2>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb50-1"><a href="Intro_to_R.html#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load data</span></span>
<span id="cb50-2"><a href="Intro_to_R.html#cb50-2" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;C:/Users/44797/Desktop/Repo/GEOG-70581/data/flow_data.csv&quot;</span>)</span>
<span id="cb50-3"><a href="Intro_to_R.html#cb50-3" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(df)</span></code></pre></div>
<pre><code>##         Date Flow_m3.s
## 1 01/10/1982    24.070
## 2 02/10/1982     7.129
## 3 03/10/1982     4.289
## 4 04/10/1982     7.610
## 5 05/10/1982     4.932
## 6 06/10/1982     3.706</code></pre>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="Intro_to_R.html#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="co"># What columns do we have</span></span>
<span id="cb52-2"><a href="Intro_to_R.html#cb52-2" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(df)</span></code></pre></div>
<pre><code>## [1] &quot;Date&quot;      &quot;Flow_m3.s&quot;</code></pre>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="Intro_to_R.html#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="co"># What data do they store?</span></span>
<span id="cb54-2"><a href="Intro_to_R.html#cb54-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(df)</span></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    13514 obs. of  2 variables:
##  $ Date     : chr  &quot;01/10/1982&quot; &quot;02/10/1982&quot; &quot;03/10/1982&quot; &quot;04/10/1982&quot; ...
##  $ Flow_m3.s: num  24.07 7.13 4.29 7.61 4.93 ...</code></pre>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb56-1"><a href="Intro_to_R.html#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="co"># We can access columns by using the $ operator</span></span>
<span id="cb56-2"><a href="Intro_to_R.html#cb56-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-3"><a href="Intro_to_R.html#cb56-3" aria-hidden="true" tabindex="-1"></a><span class="co"># df$Date</span></span>
<span id="cb56-4"><a href="Intro_to_R.html#cb56-4" aria-hidden="true" tabindex="-1"></a><span class="co"># df$Flow</span></span></code></pre></div>
<p>This is a dataframe, containing two columns, in a similar format to something you may be familiar with in Excel. It has a column of dates and a column of river flow (measured in m^3 per second).</p>
<p>We may want to index using <code>df[row.index, column.index]</code></p>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb57-1"><a href="Intro_to_R.html#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="co"># We can extract certain rows</span></span>
<span id="cb57-2"><a href="Intro_to_R.html#cb57-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-3"><a href="Intro_to_R.html#cb57-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract rows 1 to 4, all columns</span></span>
<span id="cb57-4"><a href="Intro_to_R.html#cb57-4" aria-hidden="true" tabindex="-1"></a>df[<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>,] </span></code></pre></div>
<pre><code>##         Date Flow_m3.s
## 1 01/10/1982    24.070
## 2 02/10/1982     7.129
## 3 03/10/1982     4.289
## 4 04/10/1982     7.610</code></pre>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb59-1"><a href="Intro_to_R.html#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract rows 1 to 4, just the second column</span></span>
<span id="cb59-2"><a href="Intro_to_R.html#cb59-2" aria-hidden="true" tabindex="-1"></a>df[<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>, <span class="dv">2</span>]</span></code></pre></div>
<pre><code>## [1] 24.070  7.129  4.289  7.610</code></pre>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="Installation.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="FirstPractical.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "lunr",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
